<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Reset password — ProfitPilot</title>
<meta name="robots" content="noindex,nofollow">
<link rel="icon" href="https://ukwebtools.com/favicon.svg">

<style>
:root{
  --bg:#0b1220;
  --bg2:#0f172a;
  --card:#0f172a;
  --txt:#eaf0ff;
  --muted:#9aa7bd;
  --line:rgba(255,255,255,.12);
  --accent:#0ea5a4;
  --accent2:#4f46e5;
  --shadow:0 22px 80px rgba(0,0,0,.55);
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--txt);
  background:
    radial-gradient(900px 420px at 20% 0%, rgba(79,70,229,.18), transparent 60%),
    radial-gradient(900px 420px at 80% 0%, rgba(14,165,164,.18), transparent 60%),
    linear-gradient(180deg,var(--bg2),var(--bg));
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
}

.card{
  width:min(560px,100%);
  background:rgba(15,23,42,.94);
  border:1px solid var(--line);
  border-radius:18px;
  padding:24px;
  box-shadow:var(--shadow);
}

h1{
  margin:0 0 8px;
  font-size:22px;
  font-weight:1000;
}

.sub{
  margin-bottom:14px;
  font-size:13px;
  color:var(--muted);
  line-height:1.6;
}

label{
  display:block;
  margin:12px 0 6px;
  font-size:12px;
  font-weight:900;
  color:var(--muted);
}

input{
  width:100%;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#0b1220;
  color:var(--txt);
  outline:none;
}
input:focus{
  border-color:rgba(14,165,164,.45);
  box-shadow:0 0 0 4px rgba(14,165,164,.14);
}

.btn{
  width:100%;
  margin-top:16px;
  padding:13px;
  border-radius:999px;
  border:none;
  font-weight:1000;
  cursor:pointer;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#fff;
}

.btn:disabled{
  opacity:.6;
  cursor:not-allowed;
}

.msg{
  margin-top:14px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.04);
  font-size:13px;
  min-height:44px;
  display:flex;
  align-items:center;
}

.ok{
  border-color:rgba(34,197,94,.35);
  background:rgba(34,197,94,.10);
}

.bad{
  border-color:rgba(239,68,68,.35);
  background:rgba(239,68,68,.12);
}

.small{
  margin-top:12px;
  font-size:12px;
  color:var(--muted);
}

a{color:#5eead4;text-decoration:none;font-weight:900}
a:hover{text-decoration:underline}
</style>
</head>

<body>

<div class="card">

<h1>Reset password</h1>

<div class="sub">
Enter your account email and we'll send a secure password reset link.
</div>

<label>Email</label>
<input id="email" type="email" placeholder="you@example.com">

<button class="btn" id="sendBtn">Send reset email</button>

<div class="msg" id="msg">—</div>

<div class="small">
Remembered your password?
<a href="login.html">Back to login</a>
</div>

</div>

<script type="module">
import { createClient }
from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

const SUPABASE_URL =
"https://xsigsftvfknefpdfsyae.supabase.co";

const SUPABASE_ANON =
"YOUR_ANON_KEY_HERE";   // ✅ keep your anon key

/* ===== SAME AUTH CONFIG AS APP ===== */
const supabase = createClient(
  SUPABASE_URL,
  SUPABASE_ANON,
  {
    auth:{
      persistSession:true,
      autoRefreshToken:true,
      detectSessionInUrl:true,
      flowType:"pkce",
      storageKey:"profitpilot_auth"
    }
  }
);

const emailEl=document.getElementById("email");
const btn=document.getElementById("sendBtn");
const msg=document.getElementById("msg");

function setMsg(text,type=""){
  msg.textContent=text;
  msg.className="msg "+type;
}

async function sendReset(){

  const email=emailEl.value.trim();

  if(!email){
    setMsg("Please enter your email.","bad");
    return;
  }

  btn.disabled=true;
  setMsg("Sending reset email…");

  const { error } =
  await supabase.auth.resetPasswordForEmail(
    email,
    {
      redirectTo:
      location.origin + "/update-password.html"
    }
  );

  btn.disabled=false;

  if(error){
    console.error(error);
    setMsg(
      "Could not send reset email. Try again shortly.",
      "bad"
    );
    return;
  }

  setMsg(
    "Reset email sent ✅ Check inbox + spam folder.",
    "ok"
  );
}

btn.addEventListener("click",sendReset);

emailEl.addEventListener("keydown",e=>{
  if(e.key==="Enter") sendReset();
});
</script>

</body>
</html>
