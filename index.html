<!-- =========================
PROFITPILOT: CLEAN UNIVERSAL HEADER + FOOTER (NO JUMBLE, NO REPEATS)
Paste this ONCE per page:
1) Put the <style> + <header> at the top of <body>
2) Put the <footer> at the bottom of <body>
3) Put the <script type="module"> once per page (ideally right before </body>)
Then DELETE your old navs/crumbs/extra buttons.
========================= -->

<style>
  :root{
    --pp-bg: rgba(255,255,255,.78);
    --pp-line: rgba(16,24,40,.10);
    --pp-shadow: 0 10px 30px rgba(16,24,40,.08);
    --pp-txt:#0b1220;
    --pp-muted:#5b6474;
    --pp-accent:#0ea5a4;
    --pp-accent2:#4f46e5;
  }

  /* HEADER */
  .pp-wrap{max-width:1150px;margin:0 auto;padding:0 14px}
  .pp-header{
    position:sticky; top:10px; z-index:100;
    margin:14px auto 0;
  }
  .pp-bar{
    background:var(--pp-bg);
    border:1px solid var(--pp-line);
    border-radius:18px;
    box-shadow:var(--pp-shadow);
    backdrop-filter: blur(10px);
    padding:10px;
  }
  .pp-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    flex-wrap:nowrap; /* keep it elegant, then scroll if needed */
  }
  .pp-brand{
    display:flex; align-items:center; gap:10px;
    min-width:200px;
    flex:0 0 auto;
  }
  .pp-logo{
    width:40px;height:40px;border-radius:14px;
    background:linear-gradient(135deg, rgba(14,165,164,.20), rgba(79,70,229,.16));
    border:1px solid var(--pp-line);
    display:flex;align-items:center;justify-content:center;
    font-weight:1000;letter-spacing:.2px;
    user-select:none;color:var(--pp-txt);
  }
  .pp-brandtitle{font-weight:1000;line-height:1.05;color:var(--pp-txt)}
  .pp-brandsub{font-size:12px;color:var(--pp-muted);font-weight:700;margin-top:3px}

  /* MAIN NAV LINKS (ONLY 3: Ukwebtools, Home, Open app) */
  .pp-nav{
    display:flex; align-items:center; gap:10px;
    flex:1 1 auto;
    justify-content:center;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
    padding:2px 4px;
    scrollbar-width: thin;
  }
  .pp-nav::-webkit-scrollbar{height:8px}
  .pp-nav::-webkit-scrollbar-thumb{background:rgba(16,24,40,.14);border-radius:999px}
  .pp-nav::-webkit-scrollbar-track{background:transparent}

  .pp-actions{
    display:flex; align-items:center; gap:10px;
    flex:0 0 auto;
    justify-content:flex-end;
    min-width:220px;
  }

  .pp-btn{
    padding:10px 14px;
    border-radius:999px;
    border:1px solid var(--pp-line);
    background:rgba(255,255,255,.92);
    color:var(--pp-txt);
    font-weight:900;
    box-shadow:0 8px 18px rgba(16,24,40,.06);
    display:inline-flex; align-items:center; gap:8px;
    white-space:nowrap;
    text-decoration:none;
    transition:transform .08s ease;
    user-select:none;
  }
  .pp-btn:hover{transform:translateY(-1px);text-decoration:none}
  .pp-btn:active{transform:translateY(0)}
  .pp-btn.ghost{background:transparent;box-shadow:none}
  .pp-btn.primary{
    border:none; color:#fff;
    background:linear-gradient(135deg,var(--pp-accent),var(--pp-accent2));
    box-shadow:0 16px 34px rgba(79,70,229,.16);
  }
  .pp-btn.active{
    border-color:rgba(14,165,164,.30);
    background:rgba(14,165,164,.08);
  }

  .pp-chip{
    padding:10px 14px;border-radius:999px;border:1px solid var(--pp-line);
    background:rgba(255,255,255,.70);
    color:rgba(16,24,40,.70);
    font-weight:900;
    max-width:260px;
    overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
    display:none;
  }

  @media(max-width:760px){
    .pp-brand{min-width:auto}
    .pp-actions{min-width:auto}
    .pp-brandsub{display:none} /* cleaner on mobile */
  }

  /* FOOTER (all other links live here, in correct sequence, no repeats in header) */
  .pp-footer{
    margin:18px auto 22px;
  }
  .pp-footbox{
    background:var(--pp-bg);
    border:1px solid var(--pp-line);
    border-radius:18px;
    box-shadow:var(--pp-shadow);
    backdrop-filter: blur(10px);
    padding:14px;
  }
  .pp-footgrid{
    display:grid;
    grid-template-columns: 1.2fr .8fr;
    gap:14px;
    align-items:start;
  }
  @media(max-width:860px){
    .pp-footgrid{grid-template-columns:1fr}
  }
  .pp-footbrand b{font-weight:1000;color:var(--pp-txt)}
  .pp-footmut{margin-top:6px;color:rgba(16,24,40,.62);font-size:12.5px;line-height:1.7;max-width:760px}
  .pp-footlinks{
    display:grid;
    grid-template-columns:repeat(2, minmax(160px,1fr));
    gap:10px 12px;
  }
  @media(max-width:520px){
    .pp-footlinks{grid-template-columns:1fr}
  }
  .pp-footlinks a{
    padding:8px 10px;
    border-radius:12px;
    border:1px solid rgba(16,24,40,.08);
    background:rgba(255,255,255,.72);
    color:rgba(16,24,40,.78);
    font-weight:900;
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    gap:8px;
    transition:transform .08s ease;
  }
  .pp-footlinks a:hover{transform:translateY(-1px)}
  .pp-footbottom{
    margin-top:12px;
    padding-top:12px;
    border-top:1px solid var(--pp-line);
    display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center;
    color:rgba(16,24,40,.62);
    font-size:12.5px;line-height:1.75;
  }
</style>

<!-- ===== HEADER: ONLY 3 MAIN LINKS ===== -->
<header class="pp-header" role="navigation" aria-label="Primary">
  <div class="pp-wrap">
    <div class="pp-bar">
      <div class="pp-row">

        <div class="pp-brand" aria-label="ProfitPilot">
          <div class="pp-logo" aria-hidden="true">PP</div>
          <div>
            <div class="pp-brandtitle">ProfitPilot</div>
            <div class="pp-brandsub">Independent tool by Ukwebtools</div>
          </div>
        </div>

        <nav class="pp-nav" aria-label="Main">
          <a class="pp-btn ghost" href="https://ukwebtools.com/" rel="nofollow">← Ukwebtools</a>
          <a class="pp-btn" id="ppHomeLink" href="index.html">Home</a>
          <a class="pp-btn" id="ppOpenAppLink" href="app.html">Open app</a>
        </nav>

        <div class="pp-actions" aria-label="Account">
          <span class="pp-chip" id="ppUserChip">—</span>
          <a class="pp-btn primary" id="ppAuthBtn" href="login.html">Log in</a>
          <a class="pp-btn" id="ppLogoutBtn" href="#" style="display:none">Log out</a>
        </div>

      </div>
    </div>
  </div>
</header>

<!-- ===== FOOTER: ALL SECONDARY LINKS IN SEQUENCE ===== -->
<footer class="pp-footer" role="contentinfo">
  <div class="pp-wrap">
    <div class="pp-footbox">
      <div class="pp-footgrid">
        <div class="pp-footbrand">
          <b>ProfitPilot</b>
          <div class="pp-footmut">
            Estimates only — outputs depend on your inputs; no profit guarantees. Not financial/legal/tax advice.
            Support: <a href="mailto:support@ukwebtools.com">support@ukwebtools.com</a>
          </div>
        </div>

        <div class="pp-footlinks" aria-label="Footer links">
          <!-- SEQUENCE (refined): core → product → help → legal -->
          <a href="index.html">Home</a>
          <a href="app.html">Open app</a>

          <a href="pricing.html">Pricing</a>
          <a href="reviews.html">Reviews</a>

          <a href="help.html">How to use</a>
          <a href="faq.html">FAQ</a>

          <a href="privacy.html">Privacy</a>
          <a href="terms.html">Terms</a>

          <a href="refunds.html">Refund Policy</a>
          <a href="signup.html">Sign up</a>
        </div>
      </div>

      <div class="pp-footbottom">
        <div>© <span id="ppYear"></span> Ukwebtools • ProfitPilot</div>
        <div><a href="https://ukwebtools.com/" rel="nofollow">Ukwebtools</a></div>
      </div>
    </div>
  </div>
</footer>

<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

  // Supabase
  const SUPABASE_URL = "https://xsigsftvfknefpdfsyae.supabase.co";
  const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhzaWdzZnR2ZmtuZWZwZGZzeWFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAyNzY4NjksImV4cCI6MjA4NTg1Mjg2OX0.Jkkh9Jd46saYBVipN8bxbWhjmhG6mgaFgtTpirKUAWg";
  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON);

  // Year
  const y = document.getElementById("ppYear");
  if (y) y.textContent = new Date().getFullYear();

  // Mark active link (Home / Open app) without adding extra buttons anywhere
  const page = (location.pathname.split("/").pop() || "index.html").toLowerCase();
  const home = document.getElementById("ppHomeLink");
  const app = document.getElementById("ppOpenAppLink");
  if (home && (page === "index.html" || page === "")) home.classList.add("active");
  if (app && page === "app.html") app.classList.add("active");

  // Auth UI (elegant: if logged in, show chip + logout; keep only "Log in" when logged out)
  const chip = document.getElementById("ppUserChip");
  const authBtn = document.getElementById("ppAuthBtn");
  const logoutBtn = document.getElementById("ppLogoutBtn");

  function clean(s){ return String(s || "").replace(/\s+/g," ").trim(); }

  async function refreshAuth(){
    const { data: { session } } = await supabase.auth.getSession();
    const email = clean(session?.user?.email);

    if (email){
      chip.style.display = "inline-flex";
      chip.textContent = email;
      chip.title = email;

      authBtn.textContent = "Account";
      authBtn.href = "app.html";
      logoutBtn.style.display = "inline-flex";
    } else {
      chip.style.display = "none";
      chip.textContent = "—";
      chip.title = "";

      authBtn.textContent = "Log in";
      authBtn.href = "login.html";
      logoutBtn.style.display = "none";
    }
  }

  logoutBtn.addEventListener("click", async (e)=>{
    e.preventDefault();
    await supabase.auth.signOut();
    location.href = "login.html";
  });

  await refreshAuth();
  supabase.auth.onAuthStateChange(()=>refreshAuth());
</script>
